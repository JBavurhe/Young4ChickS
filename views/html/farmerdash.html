<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Farmer Dashboard â€“ Young4ChickS</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" rel="stylesheet">
  <style>
    :root{ --brand:#e67e22; }
    .sidebar{width:220px;min-height:100vh;background:#f8f9fa}
    .sidebar a{display:block;padding:.75rem 1rem;color:#333;text-decoration:none}
    .sidebar a.active,.sidebar a:hover{background:var(--brand);color:#fff}
    .btn-brand{background:var(--brand);color:#fff}
    .btn-brand:hover{background:#cf711a}
    .table-wrap{max-height:45vh;overflow:auto}
    .logout{position:absolute;bottom:20px;width:100%;text-align:center}
  </style>
</head>
<body>
<div class="d-flex">
  <nav class="sidebar border-end position-relative">
    <h5 class="text-center py-3 fw-bold">Farmer</h5>
    <a href="#" data-page="home" class="active"><i class="fas fa-house me-2"></i>Dashboard</a>
    <a href="#" data-page="request"><i class="fas fa-paper-plane me-2"></i>Request Chicks</a>
    <a href="#" data-page="history"><i class="fas fa-clock me-2"></i>Request History</a>
    <div class="logout"><button class="btn btn-outline-danger btn-sm w-75" onclick="logout()">Logout</button></div>
  </nav>

  <main class="flex-grow-1 p-4">
    <!-- OVERVIEW -->
    <section id="page-home">
      <h4>Overview</h4>
      <div id="cards" class="row g-3 mt-2"></div>
    </section>

    <!-- REQUEST FORM -->
    <section id="page-request" class="d-none">
      <h4>Request Chicks</h4>
      <form id="reqForm" class="mt-3" style="max-width:500px">
        <div class="mb-3">
          <label class="form-label">Chick Type</label>
          <select id="rType" class="form-select" required>
            <option value="">--select--</option>
            <option>Broiler</option><option>Layer</option>
          </select>
        </div>
        <div class="mb-3">
          <label class="form-label">Quantity (max 500)</label>
          <input id="rQty" type="number" class="form-control" required>
        </div>
        <div class="mb-3">
          <label class="form-label">Farmer Type</label>
          <select id="fType" class="form-select" required>
            <option value="">--select--</option>
            <option>starter</option><option>returning</option>
          </select>
        </div>
        <button class="btn btn-brand">Submit Request</button>
      </form>
      <p id="reqMsg" class="mt-2 text-success d-none">Request submitted!</p>
    </section>

    <!-- HISTORY -->
    <section id="page-history" class="d-none">
      <h4>Request History</h4>
      <div class="table-wrap mt-3">
        <table class="table table-sm table-bordered">
          <thead class="table-light"><tr><th>Type</th><th>Qty</th><th>Status</th><th>Date</th></tr></thead>
          <tbody id="histBody"></tbody>
        </table>
      </div>
    </section>
  </main>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js"></script>
<script>
  // dummy arrays
  var requests = [
    {type:"Broiler",qty:100,status:"Approved",date:"2025-07-10"},
    {type:"Layer",qty:200,status:"Pending",date:"2025-07-12"}
  ];

  // sidebar nav
  var links=document.querySelectorAll('.sidebar a');
  for(var i=0;i<links.length;i++){
    links[i].addEventListener('click',function(e){
      e.preventDefault();
      for(var j=0;j<links.length;j++){links[j].classList.remove('active');}
      this.classList.add('active');
      var page=this.getAttribute('data-page');
      var secs=document.querySelectorAll('main section');
      for(var k=0;k<secs.length;k++){secs[k].classList.add('d-none');}
      document.getElementById('page-'+page).classList.remove('d-none');
      if(page==='home') loadCards();
      if(page==='history') loadHistory();
    });
  }

  function loadCards(){
    var total=requests.length;
    var approved=0;var pending=0;var rejected=0;
    for(var i=0;i<requests.length;i++){
      if(requests[i].status==='Approved') approved++;
      if(requests[i].status==='Pending') pending++;
      if(requests[i].status==='Rejected') rejected++;
    }
    var wrap=document.getElementById('cards');
    wrap.innerHTML="";
    var data=[
      {label:"Total Requests",val:total},
      {label:"Approved",val:approved},
      {label:"Pending",val:pending}
    ];
    for(var d=0;d<data.length;d++){
      var col=document.createElement('div');col.className='col-sm-4';
      col.innerHTML='<div class="card text-center border-0 shadow-sm"><div class="card-body"><h3>'+data[d].val+'</h3><p class="mb-0">'+data[d].label+'</p></div></div>';
      wrap.appendChild(col);
    }
  }
  loadCards();

  // history table
  function loadHistory(){
    var body=document.getElementById('histBody');
    body.innerHTML="";
    for(var i=0;i<requests.length;i++){
      var r=requests[i];
      var row=document.createElement('tr');
      row.innerHTML='<td>'+r.type+'</td><td>'+r.qty+'</td><td>'+r.status+'</td><td>'+r.date+'</td>';
      body.appendChild(row);
    }
  }

  // request form
  document.getElementById('reqForm').addEventListener('submit',function(e){
    e.preventDefault();
    var type=document.getElementById('rType').value;
    var qty=parseInt(document.getElementById('rQty').value);
    var ft=document.getElementById('fType').value;
    requests.push({type:type,qty:qty,status:'Pending',date:new Date().toISOString().slice(0,10)});
    document.getElementById('reqForm').reset();
    document.getElementById('reqMsg').classList.remove('d-none');
    loadCards();
  });

  function logout(){alert('Logging out...');window.location.href='index.html';}
</script>
</body>
</html>
